<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<fragment xmlns="http://schemas.haulmont.com/cuba/screen/fragment.xsd"
          caption="msg://gatePickupCaption">
    <data>
        <collection id="gateDc"
                  class="com.company.exceed.entity.Gate"
                  view="_local">
            <loader id="gatesDl">
                <query>
                    <![CDATA[select g from exceed_Gate g
                      where g.availableFrom <= CURRENT_TIME and g.availableTo >= CURRENT_TIME
                      and not exists
                      (select p.id from exceed_PlanIn p where p.gate = g.number) ]]>
                </query>
            </loader>
        </collection>
    </data>
    <layout spacing="true">
        <lookupField id="lookup" optionsContainer="gateDc" property="number"/>
        <buttonsPanel>
            <button id="okBtn" icon="icons/ok.png"/>
            <button id="cancelBtn" icon="icons/cancel.png"/>
        </buttonsPanel>
    </layout>
</fragment>

